---
title: Диалог без логов. Безопасное общение в глобальной сети.
layout: post
tags: web xmpp privacy
---

<b class="bukvica">Н</b>ас окружают смартфоны, компьютеры, умные часы и интеллектуальные кофеварки. Почти в каждом рекламном слогане подобной техники мы видим три ключевых слова: удобство, быстрота и безопасность. Эргономика современных устройств действительно постоянно развивается и почти не вызывает нареканий, то же можно сказать и о быстродействии.

![iot](/images/leasd.jpg)

А что такое «безопасность» относительно цифровых технологий, можно ли назвать безопасным океан гаджетов вокруг нас? Каждый параноик знает, что ощущение безопасности эфемерно. В этой статье мы укрепим такое настроение в вопросе приватности, т.е. тайны общения пользователей между собой в глобальной сети. Этот материал может помочь трезво взглянуть на безопасность чатов, в которых нередко проскальзывают личные тайны и файлы, публичность которых сродни ночному кошмару.

Прежде, чем говорить о безопасности почтовых сервисов и социальных сетей, нужно понять, как мы попадаем на них, т.е. на чем запускаем приложения и открываем сайты. Как правило, это компьютеры и смартфоны под управлением операционных систем от таких гигантов как Microsoft, Google и Apple. Заботятся ли сии гиганты рынка о безопасности пользователей? Они утверждают, что да. Они не были бы теми, кто есть, если не утверждали бы этого, точно так же, как если бы и не передавали данные о своих пользователях государственным силовым структурам. 

 В политиках конфиденциальности такой сценарий даже прописан, но кто эти соглашения хотя бы раз в жизни прочел целиком? Если вы решили, что корпорации защищают пользователей от злоумышленников и сотрудничают в случае запроса с правоохранителями, вы поспешили, потому что и защита от злоумышленников также эфемерна, как и вся напускная «безопасность» продуктов вроде Windows, Android, Mac OS и IOS. Помимо того, что о пользователях собирается «анонимная» информация, которая потом продается рекламодателям, по требованию тех же спецслужб во всех перечисленных операционных системах предусмотрены так называемые «уязвимости нулевого дня», намеренно заложенные разработчиками, которые позволяют заинтересованным лицам напрямую подключаться к устройствам без ведома пользователей для добычи личной информации о них. Кажется, речь снова пошла о людях в погонах, но нет. Мы говорим о хакерах – IT-специалистах, сражающихся на темной стороне, которые помимо вновь найденных уязвимостей могут использовать и выявленные уязвимости нулевого дня.

 Вопросу выбора операционной системы мы посвятим отдельный разговор, в рамках же этой статьи коротко скажем об опенсурсных (Open Source) проектах. К самым дружелюбным для новых пользователей можно отнести дистрибутивы Ubuntu, Linux Mint и Linux Manjaro. На самом деле их бескрайнее множество на любой вкус и цвет, есть и отдельные варианты для мобильных устройств. В чем отличие этих малоизвестных продуктов от популярных Windows, Mac OS и прочих? Операционные системы на ядре Linux распространяются по свободной лицензии, в рамках которой все разработчики обязаны предоставлять исходные коды своих ОС. Пользуясь проприетарными продуктами, вы не знаете как они работают, какие данные собирают о вас и куда их отправляют. Вы полностью доверяетесь сердечным заверениям корпораций-разработчиков о приватности и радуетесь жизни, в то время как вся ваша стена безопасности – лишь дырявый забор. Такие системы разрабатывает ограниченное количество человек в закрытой конторе, в то время как свободные операционки на ядре Linux разрабатывает и исправляет неограниченное многомиллионное сообщество по всему миру. Linux называют безопасным, потому что каждый заинтересованный пользователь может в точности узнать как система работает, настроить ее под себя, удалив ненужные модули, и многое другое, что и не снилось пользователям продукции от Microsoft, Google и Apple. Популярное же мнение о сложности Linux построено на предрассудках и незнании. Об этом мы также будем говорить в отдельной статье.

 Получив представление о более низкоуровневой уязвимости, перейдем непосредственно к теме сервисов, которые мы выбираем для общения. Все доступные продукты можно разделить на два типа: централизованные и децентрализованные. В централизованных сервисах все пользователи общаются через подконтрольные одному лицу (обычно юридическому) серверы, т. е. отправляют сообщения друг другу не на прямую, а через посредника, который все сообщения обрабатывает, хранит и прочее. Интуитивно понятно, что такая схема общения не может являться эталоном безопасности. В то же время таковыми сервисами являются Vk, Facebook, Skype, Instagram и даже Telegram, ну и почти все остальные популярные мессенджеры и социальные сети. Пользователь не может знать как работают сервера, что они хранят даже после нажатия кнопки «удалить», кому сохраненную информацию предоставляют. Противопоставлением такому насилию над человечеством являются децентрализованные решения. Их главное отличие в том, что они не зависят от конкретно взятых серверов, существуют независимо и в большинстве своем могут обеспечить свою работоспособность даже на домашних серверах пользователя. Идеалом общения в сети является схема P2P (Peer-to-peer), где адресат и получатель общаются вовсе непосредственно, напрямую обмениваясь информацией, но подобная технология станет популярной с повсеместным переходом с IPv4 на IPv6, а это, возможно, еще полвека.

 Исходя из вышесказанного, остановимся на децентрализованных сервисах, не привязанных к конкретным корпорациям и серверам. Ярким и проверенным временем примером является протокол XMPP (больше известный как Jabber), позволяющий организовывать приватные диалоги и конференции с большим количеством пользователей. Канувшая в прошлое ICQ работает на данном протоколе, но привязана к одной конторе, что и делает ее полностью коммерческим и не доверенным проектом. Нормальные jabber-клиенты (приложения) могут подключаться к любым серверам и позволяют общаться с пользователями, зарегистрированными на других серверах. Получается, нет никакой монополии. Однако надо с должным вниманием отнестись к выбору сервера. Главными критериями являются юрисдикция и репутация, т. е. география физического местонахождения сервера и его репутация на компетентных ресурсах (как правило, это IT-форумы и Darknet-площадки). Физическое местонахождение сервера позволит оценить его доступность для людей, которым вы можете быть интересны (чем дальше сервер стоит от вашей страны – тем лучше!), а его репутация скажет о политике конфиденциальности и обычно она зависит непосредственно от репутации его обладателя. Как правило, на этичных серверах отключены логи, т. е. они не хранят ни сообщений пользователя, ни историю его подключений, а при регистрации такие серверы не собирают излишнюю личную информацию (например, номер телефона, настоящее имя и прочее), потому что она им не интересна. 

 Если пользователь имеет возможность, он может поставить свой XMPP-сервер, в надежности которого будет уверен. При наличии постоянного IP-адреса (Real IP) такой сервер может быть организован прямо дома. Также это удобный вариант для организации локальных чатов (например, в офисном здании). При выборе сервера (программного обеспечения, а не железа), необходимо выбирать опенсурсные проекты, исходные коды которых находятся в открытом доступе, чтобы быть уверенным в «прозрачности» их работы. Мы рекомендуем OpenFire и Ejabberd. Видеоинструкцию по установке OpenFire на Ubuntu Server вы найдете в видео к этой статье.
При выборе клиентов предлагаем обратить внимание на PSI+ (кроссплатформенный), Wime (удобный форк PSI+ для Windows), Pidgin (Linux), Gajim (Linux) и Xabber (Android). Все являются свободным программным обеспечением, провести аудит безопасности которых может каждый желающий. И что также очень приятно, они бесплатны.

Пользователю, на «ты» общающемуся только с Instagram, сложно объяснить, чем все-таки лучше Jabber тех или иных популярных мессенджеров. Правило, имеющее единичные исключения, гласит: качественные с позиции безопасности продукты проигрывают в дизайне и удобстве дырявому ширпотребу. Это полностью объясняется отсутствием инвестиций, потому что безопасный опенсурс держится на непостоянных пожертвованиях и коммерчески просто невыгоден. Работать команде программистов на чистом энтузиазме не легко, это ясно, поэтому, мы советуем по мере сил поддерживать независимых разработчиков. Если пользователь халатно относится к свое безопасности, это его право. Мы тоже используем Telegram, YouTube и Twitter, однако используем только как СМИ, а не как инструмент для безопасного общения. 
Отдельный абзац нужно выделить мессенджеру Telegram, который последнее время активно набирает популярность. Может ли сервис, заботящийся о приватности своих пользователей, запрашивать СМС-подтверждение при каждой авторизации, да и вообще просить номер при регистрации? Мы считаем, что нет. Поэтому, грубо говоря, Telegram ничем не отличается от What’s App, Viber и прочих. Telegram не может оправдаться шифрованием, потому что наличие шифрования не делает его ни децентрализованным, ни приватным. Можно ли назвать безопасным клуб революционеров, при входе в который человек заполняет подробную анкету? Если его и не подслушают, могут сообщить правоохранителям его данные, по которым его найдут. Если клуб приватный и не имеет дурных намерений, ему незачем собирать данные о гостях, которые могут их скомпрометировать.

Возвращаясь к теме Jabber, скажем о шифровании. Шифрование необходимо, ибо при этичном сервере интернет-трафик может быть перехвачен где-то по пути, что позволит третьему лицу прочитать сообщение. Шифрование решает эту проблему. Даже при перехвате трафика с зашифрованным сообщением, злоумышленник не сможет увидеть ничего внятного. Некоторые из перечисленных выше jabber-клиентов имеют встроенные возможности шифрования, однако даже те, которые не шифруют «из коробки», имеют бесплатные расширения (плагины) для таких задач. Важное замечание: для приватного общения поддерживать шифрование должны оба пользователя. Широкое распространение имеют OTR, OMEMO и PGP/GPG алгоритмы шифрования. OTR – самый распространенный алгоритм, поддерживается большинством всех jabber-клиентов. Его, как рабочий вариант, мы рассмотрим далее. OMEMO – удобнее OTR, но далеко не все клиенты имеют его поддержку. PGP/GPG шифрованию мы посвятим отдельную статью, потому что область применения этого алгоритма намного шире, чем просто обмен мгновенными сообщениями.
OTR (Off-the-record Messaging) – алгоритм, разработанный в 2004 году.

Каждый параноик хочет знать, что и как его защищает, поэтому чтобы описать процесс установки шифрованного диалога при помощи OTR, при этом не вдаваясь в хэш-функции и математические формулы, можно описать алгоритм так: пользователи генерируют на своей стороне уникальные отпечатки, затем ими обмениваются (происходит автоматически). Начинается зашифрованный диалог с непроверенным лицом. Подтверждение личности собеседника возможно при помощи ответа на секретный вопрос и другое. При следующем начале чата отпечатки сравниваются. Если отпечаток собеседника был сохранен ранее, OTR-плагин сообщает, что началась переписка с проверенным лицом. Если OTR-отпечаток не подтвержден, значит собеседник сменил устройство, либо его аккаунтом завладело третье лицо. В общем, новый отпечаток – повод задуматься и проанализировать ситуацию. Шифрование сообщений происходит на основе общего ключа, сгенерированного на основе двух отпечатков, случайным образом сгенерированных обоими собеседниками. Кроме этого во время диалога ключ постоянно обновляется, о чем jabber-клиенты сообщают друг другу в автоматическом режиме. Единственным минусом Off-the-record-шифрования является проблема получения оффлайн-сообщений, которые приходят в нечитаемом виде. Именно в этом вопросе сквозное (end-to-end) шифрование OMEMO удобнее, потому что позволяет получать зашифрованные сообщения, отправленные в период отсутствия адресата в сети. Шифрование OMEMO очень молодо в сравнении с OTR, но не уступает в безопасности. Если ваш jabber-клиент и клиент собеседника поддерживает данное шифрование, разумно будет использовать именно его.

Многие XMPP-серверы поддерживают передачу файлов между пользователями, однако передавать ценные файлы в открытом виде в любом случае опасно. Для передачи файлов разумно использовать шифрование GPG/PGP, либо криптоконтейнеры. В таком случае можно безопасно использовать любые облачные хранилища. Если передаваемый файл не содержит тайны, и мы решили передать его в открытом виде, после загрузки будет разумно проверить хэш-сумму, чтобы убедиться, что это тот файл, который мы хотели скачать, и никакой хакер не инжектировал в него вредоносный код, перехватив его на просторах интернета. Видеоинструкцию по проверке хэш-суммы файла, по шифрованию файла PGP/GPG ключом и созданию криптоконтейнера можно найти в видео к этой статье.
Наш проект располагает своим Jabber-сервером, в чат-комнатах которого каждый читатель может обмениваться информацией с единомышленниками и задавать вопросы. Также на сервере возможна регистрация пользователей с именем вида username@paranoids.info, доступная членам комьюнити. За более подробной информацией о регистрации подобного аккаунта и по всем вопросам личной безопасности можете написать нам.

