---
title: Что такое GPG/PGP-шифрование?
layout: post
tags: шифрование общение PGP
---

#Шифруем, подписываем, проверяем.

![encryption](/images/pgp-encryption-pgp.png)

<b class="bukvica">Н</b>ачнем с того, что PGP и GPG – по сути одно и то же. Они полностью совместимы между собой, почему часто и употребляются вместе как части одного слова. Различия в названиях коротко объясняются так: PGP (Pretty Good Privacy) – продукт одноименной американской компании, которая в 1990-ых годах утвердила стандарт OpenPGP, согласно которого стандартизированный исходный код был открыт всем желающим разработчикам.
В 1999 году силами Фонда свободного программного обеспечения (любители Linux) на базе OpenPGP был выпущен [GNU Privacy Guard](https://gnupg.org/), впоследствии широко распространившийся под акронимом GPG. Программное обеспечение GPG по умолчанию установлено в большей части дистрибутивов Linux, правда софт работает только в командной строке, т.е. без визуальной оболочки с котиками и кнопками.

В настоящее время PGP-шифрование не имеет аналогов. Подобное криптографическое программное обеспечение позволяет не только зашифровывать текстовые сообщения, но и файлы, а также подписывать текст уникальной подписью пользователя, благодаря которой любой желающий сможет убедиться в подлинном авторстве написанного.

Существуют десятки популярных программ, работающих с PGP, однако проприетарную их часть нельзя назвать абсолютным гарантом безопасности. Также некоторые почтовые клиенты и мессенджеры работают со встроенной функцией PGP-шифрования, но мы не рекомендуем использовать их всерьез, особенно, если подобное ПО имеет закрытый исходный код. Программы с закрытым исходным кодом могут скомпрометировать ваш секретный ключ, что недопустимо.

PGP относится к асимметричным алгоритмам шифрования. Не вдаваясь в сложные математические формулы это можно объяснить так: создается два ключа, один из которых публичный, второй – секретный. Публичным можно делиться со всеми, для чего в сети существуют даже специальные серверы. Для того чтобы отправить пользователю зашифрованное сообщение, достаточно иметь его публичный ключ. Зашифрованные данные таким ключом сможет расшифровать только владелец секретного ключа из той же связки. 

Для большей ясности можно привести следующий пример: давая пользователю свой публичный ключ, мы даем ему наше имя в социальной сети. Теперь мы сможем получать на наш аккаунт сообщения и это ничем нам не угрожает. Если пользователь отправит нам послание и не сохранит его у себя, он не сможет больше его прочесть, потому что теперь оно доступно только получателю. Абсолютно также происходит с PGP-шифрованием. Публичный ключ является указанием алгоритму программы под какой ключ необходимо зашифровать сообщение, при этом ключ доступа остается в тайне. Так же происходит в нашем примере: сообщив имя аккаунта в социальной сети, мы сохраняем в тайне наш логин и пароль. Соответственно, если мы теряем доступ к аккаунту, то и все входящие сообщения этого аккаунта для нас потеряны. Подвести итог сказанного можно так: публичные ключи используются отправителем для шифрования данных, но они не могут их расшифровать.

Шифрование и дешифровка, описанные выше, относятся как к текстам, так и к файлам. Однако возможности PGP на этом не кончаются. PGP позволяет подписывать данные уникальной подписью секретного ключа, проверить которую можно при помощи публичного. Имея наш публичный ключ, любой пользователь сможет проверить подписанную нами информацию. Если, например, текст был изменен хотя бы на один символ, проверка PGP выявит изменение. Таким образом пользователь сможет понять, что написанное нами сообщение кто-то исправил. Например, изменил реквизиты для оплаты услуг. Подпись можно использовать как для нешифрованного текста, так и совмещая основное шифрование с подписью. В таком случае получатель, владелец секретного ключа, увидит подпись и проверит действительно ли автором является владелец нашего секретного ключа (т.е. мы), а затем расшифрует своим секретным ключом наше сообщение, зашифрованное при помощи его публичного ключа.

При создании ключа можно указать данные, которые будут отображаться у всех владельцев публичной части. Как правило, это имя и электронная почта. Эти идентификаторы позволяют ориентироваться в списке публичных ключей. В действительности в этих полях при создании ключа можно указать что угодно, и точно не свое имя и почту, если мы хотим остаться terra incognito.

Что делать, если некий злоумышленник создаст ключ, в котором укажет наши контактные данные: нашу почту и имя? Неужели он сможет обманывать людей, выдавая себя за нас? В какой-то степени у него это может получиться, но прочитать наши сообщения при помощи своего секретного ключа никто точно не сможет. Важное замечание: если создать две пары ключей (т.е. две связки с публичным и секретным ключами), указав одни и те же контактные данные владельца, они ни в каком случае не буду идентичны.

Более того во избежание подобных конфузов PGP имеет возможность подписи публичных ключей. Эта функция позволяет любому пользователю подписать наш публичный ключ, если он уверен, что реальный владелец ключа соответствует заявленному. Так формируется сеть доверия. Ключи, подписанные большим количеством пользователей, вызывают больше доверия, чем те, что подписаны лишь несколькими людьми, при том с частичным доверием (такая подпись тоже возможна). На ряду с децентрализованной схемой подписей существует и централизованная, где за личность пользователя ручается центр сертификации, но нам такая история не особо интересна.

Безопасен ли PGP, могут ли злоумышленники с большими вычислительными ресурсами взломать наши секретные сообщения? На протяжении многих лет такой информации не появлялось. Все найденные ранее уязвимости, даже самые незначительные, оперативно закрывались свободным сообществом разработчиков. 

В настоящее время широко рекомендуется использовать ключи, длина которых 2048 бит (т.е. 2048 нулей и единиц), потому что ключи в 1024 бита вот-вот могут быть дешифрованы всяческими суперкомпьютерами, о чем известно из открытых источников. При создании ключа лично мы рекомендуем использовать ключи максимальной длины в 4096 бит. Это может отрицательно сказаться на скорости расшифровывания, однако при работе с небольшими текстами вроде этого не будет абсолютно никакой разницы.

При создании ключа задается срок его действительности, обычно это год или несколько лет, однако можно создать и бессрочный ключ. Для дополнительной защиты PGP позволяет создавать дочерние ключи, при чем их можно ограничивать в функционале: ключ для подписи и ключ для расшифровывания. Такие ключи удобно использовать в групповой работе, а также для личного использования, например, на ноутбуке, который можно потерять. При потере носителя с секретным ключом ключ можно считать скомпрометированным, т.е. ненадежным. Если же мы потеряли носитель с ключом, срок действия которого истекает накануне, а наш основной «папа-ключ» хранится в надежном месте, мы можем создать себе новый временный секретный ключ и быть спокойны.

Возможно только одно стечение обстоятельств, когда пользователи не смогут общаться, т.е. взаимно шифровать и расшифровывать сообщения. Виной тому будет старое программное обеспечение одного из двух абонентов, которое не будет знать нового алгоритма шифрования, которым пользуется собеседник. В виду этого мы рекомендуем следить за новостями из мира криптографии и пользоваться актуальным программным обеспечением с открытым исходным кодом, тем самым GPG. 
